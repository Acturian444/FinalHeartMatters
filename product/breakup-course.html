<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#fffcf1">
    <title>Breakup Recovery Course - Heal Your Heart, Rebuild Your Life | Heart Matters</title>
    <meta name="description" content="A comprehensive digital course to help you heal from heartbreak, rebuild your confidence, and create a life you love. Guided journaling, emotional support, and practical tools for your healing journey.">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Breakup Recovery Course - Heal Your Heart, Rebuild Your Life | Heart Matters">
    <meta property="og:description" content="A comprehensive digital course to help you heal from heartbreak, rebuild your confidence, and create a life you love.">
    <meta property="og:type" content="product">
    <meta property="og:url" content="https://heartmatters.com/product/breakup-course.html">
    <meta property="og:image" content="https://heartmatters.com/images/shop/course-placeholder.jpg">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&display=swap" as="style">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&display=swap&font-display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Stripe -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="../style.css?v=2">
    <link rel="stylesheet" href="../shop/shop.css?v=1">
    <link rel="stylesheet" href="product.css?v=1">
    
    <style>
        /* Mobile font size adjustments */
        @media (max-width: 768px) {
            .product-hero h1 {
                font-size: 2.5rem !important;
                line-height: 1.2 !important;
            }
            
            .product-hero .product-subtitle {
                font-size: 1.1rem !important;
                line-height: 1.4 !important;
            }
            
            .product-hero .price-note {
                font-size: 1rem !important;
            }
            
            .btn-large {
                font-size: 1.1rem !important;
                padding: 1rem 2rem !important;
            }
            
            /* Reduce hero section height on mobile */
            .product-hero {
                min-height: 70vh !important;
            }
            
            /* Move hero content up more on mobile */
            .product-hero-content {
                margin-top: -6rem !important;
            }
        }

        /* Incognito Banner Styles */
        .incognito-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #000;
            color: #fffcf1;
            z-index: 9999;
            padding: 0.8rem 1rem;
            font-family: 'DM Sans', sans-serif;
            font-size: 0.9rem;
            line-height: 1.4;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .banner-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .banner-text {
            flex: 1;
            text-align: center;
        }

        .banner-close {
            background: none;
            border: none;
            color: #fffcf1;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s;
            flex-shrink: 0;
        }

        .banner-close:hover {
            background: rgba(255, 252, 241, 0.1);
        }

        /* Adjust header position when banner is visible */
        body.has-incognito-banner header {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            z-index: 9998 !important;
            background: #fffcf1 !important;
            margin-top: 0 !important;
            width: 100vw !important;
            transform: translateY(calc(0.8rem + 0.9rem * 1.4 + 0.8rem)) !important;
        }

        /* Ensure banner is always at the very top */
        body.has-incognito-banner .incognito-banner {
            top: 0 !important;
            z-index: 9999 !important;
        }

        /* Add spacing for main content when header is fixed */
        body.has-incognito-banner main {
            padding-top: 120px; /* 60px banner + ~60px header */
        }

        /* Fix hamburger button positioning when banner is visible */
        body.has-incognito-banner .hamburger {
            z-index: 12001 !important; /* Higher than banner */
        }

        /* Ensure menu overlay covers banner when visible */
        body.has-incognito-banner .menu-overlay {
            z-index: 12002 !important; /* Higher than banner (9999) */
            top: 0 !important; /* Start from very top */
            height: 100% !important; /* Full height coverage */
            width: 100% !important; /* Full width coverage */
        }

        body.has-incognito-banner .menu-overlay nav {
            z-index: 12003 !important; /* Higher than banner (9999) */
            top: 0 !important; /* Start from very top */
            height: 100% !important; /* Full height */
            width: 280px !important; /* Standard menu width */
        }

        /* Mobile-specific banner height calculation */
        @media (max-width: 600px) {
            /* Use fixed banner height for mobile to avoid calculation issues */
            body.has-incognito-banner header {
                transform: translateY(60px) !important; /* Fixed banner height */
            }
            
            /* Ensure banner is properly positioned above header */
            body.has-incognito-banner .incognito-banner {
                top: 0 !important;
                z-index: 9999 !important;
            }
            
            /* Adjust main content padding for mobile */
            body.has-incognito-banner main {
                padding-top: 140px; /* Account for mobile banner + header height */
            }
        }

        @media (max-width: 600px) {
            .incognito-banner {
                padding: 0.6rem 0.8rem;
                font-size: 0.85rem;
                /* Extend background to fill gap */
                padding-bottom: 1.2rem;
            }
            
            .banner-content {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
            }
            
            .banner-text {
                text-align: left;
            }
            
            .banner-close {
                align-self: flex-end;
                margin-top: -0.5rem;
                position: absolute;
                top: 0.8rem;
                right: 0.8rem;
            }
        }
    </style>
</head>
<body class="breakup-course-page">
    <!-- Incognito Warning Banner -->
    <div id="incognitoBanner" class="incognito-banner" style="display: none;">
        <div class="banner-content">
            <span class="banner-text">⚠️ Private Browsing Detected: Use a regular browser window to purchase course and gain access.</span>
            <button class="banner-close" onclick="dismissIncognitoBanner()">×</button>
        </div>
    </div>

    <header>
        <div class="container">
            <nav class="nav-centered">
                <button class="hamburger" aria-label="Open menu" onclick="openMenu()">
                    <svg width="28" height="28" viewBox="0 0 28 28" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
                        <rect y="6" width="28" height="2.5" rx="1.25" fill="currentColor"/>
                        <rect y="13" width="28" height="2.5" rx="1.25" fill="currentColor"/>
                        <rect y="20" width="28" height="2.5" rx="1.25" fill="currentColor"/>
                    </svg>
                </button>
                <ul class="nav-links nav-left">
                    <li><a href="../letitout.html">LET IT OUT</a></li>
                    <li><a href="../theheartroom.html">THE HEART ROOM</a></li>
                </ul>
                <a href="../index.html" class="logo-text center-logo">Heart Matters</a>
                <ul class="nav-links nav-right">
                    <li class="nav-dropdown">
                        <a href="../shop/index.html" class="nav-dropdown-trigger">SHOP</a>
                        <ul class="nav-dropdown-menu">
                            <li><a href="../shop/index.html">Still Healing Collection</a></li>
                            <li><a href="../product/breakup-course.html" id="desktopBreakupResetLink">The Breakup Reset</a></li>
                            <li id="myCourseLink" style="display: none;"><a href="../course/breakup-course.html" id="desktopContinueBreakupResetLink">Continue The Breakup Reset</a></li>
                        </ul>
                    </li>
                    <li><a href="../info.html">JOIN THE MOVEMENT</a></li>
                </ul>
            </nav>
        </div>
        </div>
    </header>

    <!-- Menu Overlay (moved outside header for proper banner coverage) -->
    <div class="menu-overlay" id="menuOverlay">
        <nav>
            <a href="../shop/index.html">SHOP</a>
            <a href="../letitout.html">LET IT OUT</a>
            <a href="../theheartroom.html">THE HEART ROOM</a>
            <a id="mobileBreakupResetLink" href="../product/breakup-course.html">THE BREAKUP RESET</a>
            <a id="mobileCourseLink" href="../course/breakup-course.html" style="display: none;">Continue The Breakup Reset</a>
            <a href="../info.html">JOIN THE MOVEMENT</a>
        </nav>
    </div>

    <main>
        <!-- Product Hero -->
        <section class="product-hero">
            <div class="container">
                <div class="product-hero-content" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
                    <div class="product-hero-text" style="color: #fffcf1;">
                        <h1 style="color: #fffcf1;">Break the Cycle. Attract Real Love.</h1>
                        <p class="product-subtitle" style="color: #fffcf1; margin-bottom: 0.5rem;">A 22-Day Breakup Reset<span class="mobile-br"></span> for Heartbreak, Divorce, and Toxic Relationships</p>
                        <div class="product-price">
                            <button class="btn btn-primary btn-large" onclick="purchaseCourse()" style="background: #fffcf1; color: #ca0013; border: none;">
                                <i class="fas fa-heart"></i>
                                Start Healing for $33
                            </button>
                            <span class="price-note" style="color: #fffcf1; display: block; margin-top: 1rem;">Just $1.50 a day to become the version of you<br>that attracts real love.</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Scrolling Value Proposition Bar -->
        <div class="product-scrolling-quotes-bar">
            <div class="product-scrolling-quotes-track">
                <span class="product-scrolling-quote">Break the cycle — stop attracting the wrong partners</span>
                <span class="product-scrolling-quote">Let go of your ex, your past, and the pain that follows</span>
                <span class="product-scrolling-quote">Heal emotional patterns that keep love out</span>
                <span class="product-scrolling-quote">Daily rituals to feel grounded, strong, and clear</span>
                <span class="product-scrolling-quote">Start feeling like yourself again — and ready for real love</span>
                <span class="product-scrolling-quote">Rebuild your confidence and become emotionally available</span>
                <span class="product-scrolling-quote">This isn’t just a course — it’s your reset, your comeback</span>
            </div>
        </div>

        <!-- Emotional Storytelling -->
        <section class="emotional-story">
            <div class="container">
                <div class="story-content">
                    <h2 style="color: #ca0013;">Why you keep attracting<br>the wrong partners</h2>
                    <p class="story-text">
                        <strong>It's not you. It's what you never healed.</strong> Most of us never fully process heartbreak. We move on too fast. We carry the pain, the baggage, the patterns — and bring them into the next relationship without realizing it. That's why we keep attracting the wrong partners. That's why the cycle repeats. That's why we sabotage the good ones and chase the ones who hurt us.
                    </p>
                    <p class="story-text">
                        <strong>This course is the reset you were never taught to take.</strong> It helps you release the past, reclaim your worth, and finally become ready for the love you actually deserve.
                    </p>
                    <div class="story-cta">
                        <button class="btn btn-primary" onclick="purchaseCourse()">
                            Start Healing for $33
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Product Description -->
        <section class="product-description">
            <div class="container">
                <div class="description-content">
                    <h2>What You'll Get</h2>
                    <div class="features-grid">
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <h3>22 Guided Lessons</h3>
                            <p>3 weeks of daily healing. Each day brings reflection, guidance, and a step forward.</p>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-pen-fancy"></i>
                            </div>
                            <h3>22 Journal Prompts</h3>
                            <p>Therapist-inspired prompts to help you feel it, write it, and let it out.</p>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <h3>Let It Out Wall</h3>
                            <p>Share what you feel anonymously and connect through our healing wall.</p>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-infinity"></i>
                            </div>
                            <h3>Lifetime Access</h3>
                            <p>Unlimited access to revisit lessons whenever you need them.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-cta" style="text-align:center; margin: 2.5rem 0;">
            <button class="btn btn-primary" onclick="purchaseCourse()">
                Start Healing for $33
            </button>
        </div>

        <!-- This Is for You If Section -->
        <section class="for-you-section">
            <div class="container">
                <h2 class="for-you-title">This Is for You If…</h2>
                <p class="for-you-subtitle">This isn't just a healing course. It's your comeback.</p>
                <div class="for-you-list">
                    <!-- Mental spiral group -->
                    <div class="for-you-item">
                        <div class="checkmark-circle">
                            <i class="fas fa-check"></i>
                        </div>
                        <span><strong>You're stuck</strong> in your head replaying what went wrong</span>
                    </div>
                    <div class="for-you-item">
                        <div class="checkmark-circle">
                            <i class="fas fa-check"></i>
                        </div>
                        <span><strong>You're spiraling</strong> and need a way to calm your mind</span>
                    </div>
                    
                    <!-- Emotional loss group -->
                    <div class="for-you-item">
                        <div class="checkmark-circle">
                            <i class="fas fa-check"></i>
                        </div>
                        <span><strong>You can't stop</strong> thinking about someone who's no longer in your life</span>
                    </div>
                    <div class="for-you-item">
                        <div class="checkmark-circle">
                            <i class="fas fa-check"></i>
                        </div>
                        <span><strong>You feel like</strong> you lost yourself in the relationship</span>
                    </div>
                    
                    <!-- Desire for change group -->
                    <div class="for-you-item">
                        <div class="checkmark-circle">
                            <i class="fas fa-check"></i>
                        </div>
                        <span><strong>You're tired</strong> of advice and just want something that actually works</span>
                    </div>
                    <div class="for-you-item">
                        <div class="checkmark-circle">
                            <i class="fas fa-check"></i>
                        </div>
                        <span><strong>You want to</strong> come out of this heartbreak stronger, wiser, and more confident</span>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-cta" style="text-align:center; margin: 2.5rem 0;">
            <button class="btn btn-primary" onclick="purchaseCourse()">
                Start Healing for $33
            </button>
        </div>

        <!-- Transformation Table Section -->
        <section class="transformation-section">
            <div class="container">
                <h2 class="transformation-title">From Heartbreak<br class="mobile-br"> to Healing</h2>
                <div class="transformation-table">
                    <div class="transformation-header">
                        <div class="transformation-col before">
                            <i class="fas fa-heart-broken"></i>
                            Before the Course
                        </div>
                        <div class="transformation-arrow transformation-arrow-header">&rarr;</div>
                        <div class="transformation-col after">
                            <i class="fas fa-heart"></i>
                            After 22 Days of Healing
                        </div>
                    </div>
                    <div class="transformation-row">
                        <div class="transformation-col before">
                            <i class="fas fa-face-sad-tear"></i>
                            Drowning in pain with no way out
                        </div>
                        <div class="transformation-arrow">&rarr;</div>
                        <div class="transformation-col after">
                            <i class="fas fa-sun"></i>
                            Facing your pain without falling apart
                        </div>
                    </div>
                    <div class="transformation-row">
                        <div class="transformation-col before">
                            <i class="fas fa-repeat"></i>
                            Replaying the relationship on a loop
                        </div>
                        <div class="transformation-arrow">&rarr;</div>
                        <div class="transformation-col after">
                            <i class="fas fa-seedling"></i>
                            Focused on your own growth and future
                        </div>
                    </div>
                    <div class="transformation-row">
                        <div class="transformation-col before">
                            <i class="fas fa-heart-circle-exclamation"></i>
                            Feeling unlovable without them
                        </div>
                        <div class="transformation-arrow">&rarr;</div>
                        <div class="transformation-col after">
                            <i class="fas fa-crown"></i>
                            You remember your worth without needing them
                        </div>
                    </div>
                    <div class="transformation-row">
                        <div class="transformation-col before">
                            <i class="fas fa-hand-point-right"></i>
                            Stuck blaming yourself or them
                        </div>
                        <div class="transformation-arrow">&rarr;</div>
                        <div class="transformation-col after">
                            <i class="fas fa-dove"></i>
                            At peace with the past
                        </div>
                    </div>
                    <div class="transformation-row">
                        <div class="transformation-col before">
                            <i class="fas fa-question-circle"></i>
                            Scared you'll never feel normal again
                        </div>
                        <div class="transformation-arrow">&rarr;</div>
                        <div class="transformation-col after">
                            <i class="fas fa-star"></i>
                            Back to yourself. Feeling whole again
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-cta" style="text-align:center; margin: 2.5rem 0;">
            <button class="btn btn-primary" onclick="purchaseCourse()">
                Start Healing for $33
            </button>
        </div>

        <!-- COURSE OUTLINE Accordion Section -->
        <section class="course-outline-section">
            <h2 class="course-outline-title">COURSE OUTLINE</h2>
            <p class="course-outline-subtitle cta-subtitle">Your 22-Day Healing Journey</p>
            <div class="accordion" id="courseAccordion">
                <!-- Week One -->
                <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false">
                        <span class="accordion-title">Week One: Face Your New Reality</span>
                        <span class="chevron">˅</span>
                    </button>
                    <div class="accordion-content">
                        <ul>
                            <li>Day 0: Introduction</li>
                            <li>Day 1: Acceptance</li>
                            <li>Day 2: Create Distance</li>
                            <li>Day 3: Nurture Yourself</li>
                            <li>Day 4: Release Your Pain</li>
                            <li>Day 5: Let Go of the Past</li>
                            <li>Day 6: Face Your Fears</li>
                            <li>Day 7: Forgiveness</li>
                        </ul>
                    </div>
                </div>
                <!-- Week Two -->
                <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false">
                        <span class="accordion-title">Week Two: Reclaim Your Power</span>
                        <span class="chevron">˅</span>
                    </button>
                    <div class="accordion-content">
                        <ul>
                            <li>Day 8: Love Detox</li>
                            <li>Day 9: Date Yourself</li>
                            <li>Day 10: Self-Love</li>
                            <li>Day 11: Sex & Intimacy</li>
                            <li>Day 12: Boost Your Confidence</li>
                            <li>Day 13: Self Talk</li>
                            <li>Day 14: Reclaim Yourself</li>
                            <li>Day 15: Self-Reflection</li>
                        </ul>
                    </div>
                </div>
                <!-- Week Three -->
                <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false">
                        <span class="accordion-title">Week Three: Rewrite Your Future</span>
                        <span class="chevron">˅</span>
                    </button>
                    <div class="accordion-content">
                        <ul>
                            <li>Day 16: Cut the Cord</li>
                            <li>Day 17: Accountability</li>
                            <li>Day 18: Get Unstuck</li>
                            <li>Day 19: Reinvent Yourself</li>
                            <li>Day 20: Break the Cycle</li>
                            <li>Day 21: Your Ideal Partner</li>
                            <li>Day 22: Grow & Glow</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonial -->
        <section class="testimonial-section">
            <div class="container">
                <div class="testimonial">
                    <div class="testimonial-content">
                        <p class="testimonial-text">
                            "I didn't think anything could help. I felt lost, angry, and exhausted from pretending I was fine. This course didn't fix me. It helped me find myself. I finally feel clear, calm, and like I can breathe again."
                        </p>
                        <div class="testimonial-author">
                            <span class="author-name">— Future You</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Final CTA -->
        <section class="final-cta">
            <div class="container">
                <div class="cta-content">
                    <h2>Ready to Heal Your Heart?</h2>
                    <p class="cta-subtitle">Your future self will thank you.</p>
                    <div class="cta-buttons">
                        <button class="btn btn-primary btn-large" onclick="purchaseCourse()">
                            <i class="fas fa-heart"></i>
                            Start Healing for $33
                        </button>
                        <p class="guarantee">One-time purchase • Lifetime access.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer id="footer">
        <div class="footer-content">
            <div class="newsletter">
                <h2 style="font-family: 'Anton', sans-serif; font-size: 2.5rem; color: #ca0013; text-align: center; margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 1px;">Not ready yet? Stay close.</h2>
                <p class="newsletter-subtext">We'll send you stories, reminders, and drops that speak to your heart. You're not alone in this.</p>
                <form class="signup-form" id="signupForm" action="https://docs.google.com/forms/d/e/1FAIpQLSdMfNDBBsnuE2Q1_Gn57Y_FJmpWTw0h00bTStNd5Bju07mTKA/formResponse" method="POST" target="hidden-iframe">
                    <div class="form-group">
                        <input type="email" name="entry.649844771" placeholder="Email" required>
                    </div>
                    <div class="form-group">
                        <input type="tel" name="entry.673635167" placeholder="Phone (optional)">
                    </div>
                    <button type="submit" class="btn btn-primary">Keep Me In The Loop</button>
                </form>
                <iframe name="hidden-iframe" style="display:none;"></iframe>
                <div id="form-success" class="form-success">Thank you for signing up!</div>
                
                <div class="social-links" style="margin-top: 2rem; text-align: center;">
                    <a href="https://www.instagram.com/heartmatters__/" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-instagram"></i>
                        <span>Instagram</span>
                    </a>
                    <a href="https://www.tiktok.com/@heartmatters__?lang=en" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-tiktok"></i>
                        <span>TikTok</span>
                    </a>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2025 Heart Matters. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../js/utils.js?v=2"></script>
    <script>
        // Mobile menu functionality
        function openMenu() {
            document.getElementById('menuOverlay').classList.add('open');
        }

        // Close menu when clicking outside
        document.getElementById('menuOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('open');
            }
        });

        // Course purchase function
        async function purchaseCourse() {
            try {
                // Check if Stripe is available
                if (typeof Stripe === 'undefined') {
                    throw new Error('Stripe is not available');
                }

                const stripePublicKey = 'pk_test_51RaP4RQ1hjqBwoa0ZnOuoRygvmNsfrRQmGG5wXIjcVhyKebi1CFfcG00pIQCceYu8pqlzFhAuJeNGz2dw5wlAcbD00wooUWDOR';
                const stripe = Stripe(stripePublicKey);
                
                // Create a Checkout Session for course purchase
                const response = await fetch('/create-checkout-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        type: 'course_purchase',
                        priceId: 'price_1RiJYoQ1hjqBwoa0rGn93X9K',
                        successUrl: window.location.origin + '/course/breakup-course.html?unlocked=true',
                        cancelUrl: window.location.href,
                    }),
                });

                const session = await response.json();

                if (session.error) {
                    throw new Error(session.error);
                }

                // Redirect to Checkout
                const result = await stripe.redirectToCheckout({
                    sessionId: session.id
                });

                if (result.error) {
                    throw new Error(result.error.message);
                }
            } catch (error) {
                console.error('Course purchase error:', error);
                alert('Payment setup failed. Please try again.');
            }
        }

        // Newsletter form submission
        document.getElementById('signupForm').addEventListener('submit', function(e) {
            var form = this;
            var submitButton = form.querySelector('button[type="submit"]');
            submitButton.disabled = true;
            submitButton.textContent = 'Submitting...';
            setTimeout(function() {
                form.reset();
                submitButton.disabled = false;
                submitButton.textContent = 'Join Us';
                document.getElementById('form-success').style.display = 'block';
                setTimeout(function() {
                    document.getElementById('form-success').style.display = 'none';
                }, 3000);
            }, 1200);
        });

        // Minimal accordion logic: only one open at a time
        const accordionHeaders = document.querySelectorAll('.accordion-header');
        accordionHeaders.forEach(header => {
            header.addEventListener('click', function() {
                const open = this.getAttribute('aria-expanded') === 'true';
                // Close all
                accordionHeaders.forEach(h => {
                    h.setAttribute('aria-expanded', 'false');
                    h.parentElement.querySelector('.accordion-content').style.maxHeight = null;
                    h.querySelector('.chevron').style.transform = 'rotate(0deg)';
                });
                // Open this one if it was closed
                if (!open) {
                    this.setAttribute('aria-expanded', 'true');
                    const content = this.parentElement.querySelector('.accordion-content');
                    content.style.maxHeight = content.scrollHeight + 'px';
                    this.querySelector('.chevron').style.transform = 'rotate(180deg)';
                }
            });
        });
        // On load, collapse all
        window.addEventListener('DOMContentLoaded', () => {
            accordionHeaders.forEach(h => {
                h.setAttribute('aria-expanded', 'false');
                h.parentElement.querySelector('.accordion-content').style.maxHeight = null;
                h.querySelector('.chevron').style.transform = 'rotate(0deg)';
            });
        });

        // Update navigation to show course links when unlocked
        function updateNavigation() {
            const isUnlocked = localStorage.getItem('courseUnlocked_breakup') === 'true';
            const myCourseLink = document.getElementById('myCourseLink');
            const mobileCourseLink = document.getElementById('mobileCourseLink');
            const mobileBreakupResetLink = document.getElementById('mobileBreakupResetLink');
            const desktopBreakupResetLink = document.getElementById('desktopBreakupResetLink');
            const desktopContinueBreakupResetLink = document.getElementById('desktopContinueBreakupResetLink');
            
            if (isUnlocked) {
                if (myCourseLink) myCourseLink.style.display = 'block';
                if (mobileCourseLink) {
                    mobileCourseLink.style.display = 'block';
                    mobileCourseLink.textContent = 'Continue The Breakup Reset';
                }
                if (mobileBreakupResetLink) mobileBreakupResetLink.style.display = 'none';
                if (desktopBreakupResetLink) desktopBreakupResetLink.style.display = 'none';
                if (desktopContinueBreakupResetLink) desktopContinueBreakupResetLink.style.display = 'block';
            } else {
                if (myCourseLink) myCourseLink.style.display = 'none';
                if (mobileCourseLink) mobileCourseLink.style.display = 'none';
                if (mobileBreakupResetLink) mobileBreakupResetLink.style.display = 'block';
                if (desktopBreakupResetLink) desktopBreakupResetLink.style.display = 'block';
                if (desktopContinueBreakupResetLink) desktopContinueBreakupResetLink.style.display = 'none';
            }
        }
        
        // Update navigation on page load
        document.addEventListener('DOMContentLoaded', updateNavigation);

        // Incognito banner detection and dismissal
        function checkIncognito() {
            console.log('Checking incognito status...');
            
            // More reliable incognito detection
            let isIncognito = false;
            
            // Method 1: Check localStorage quota (incognito has very limited storage)
            try {
                const testKey = 'incognito-test-' + Date.now();
                const testValue = 'x'.repeat(1024 * 1024); // 1MB test
                localStorage.setItem(testKey, testValue);
                localStorage.removeItem(testKey);
                isIncognito = false;
            } catch (e) {
                console.log('localStorage quota test failed:', e);
                isIncognito = true;
            }
            
            // Method 2: Check for incognito-specific browser features
            if (window.navigator.webdriver || 
                (window.chrome && !window.chrome.runtime) ||
                (window.safari && !window.safari.pushNotification)) {
                console.log('Browser-specific incognito indicators detected');
                isIncognito = true;
            }
            
            // Method 3: Check if we can write to localStorage at all
            try {
                const testKey = 'incognito-test';
                localStorage.setItem(testKey, 'test');
                const result = localStorage.getItem(testKey);
                localStorage.removeItem(testKey);
                
                if (result !== 'test') {
                    console.log('localStorage write/read test failed');
                    isIncognito = true;
                }
            } catch (e) {
                console.log('localStorage basic test failed:', e);
                isIncognito = true;
            }
            
            console.log('Is incognito detected:', isIncognito);
            console.log('Banner dismissed:', window.sessionStorage.getItem('incognitoBannerDismissed') === 'true');
            
            // For testing: force show banner (remove this line after testing)
            isIncognito = true;
            
            if (isIncognito && window.sessionStorage.getItem('incognitoBannerDismissed') !== 'true') {
                console.log('Showing incognito banner');
                document.getElementById('incognitoBanner').style.display = 'block';
                document.body.classList.add('has-incognito-banner');
            } else {
                console.log('Hiding incognito banner');
                document.getElementById('incognitoBanner').style.display = 'none';
                document.body.classList.remove('has-incognito-banner');
            }
        }

        function dismissIncognitoBanner() {
            console.log('Dismissing incognito banner');
            window.sessionStorage.setItem('incognitoBannerDismissed', 'true');
            document.getElementById('incognitoBanner').style.display = 'none';
            document.body.classList.remove('has-incognito-banner');
        }

        // Check incognito status on page load
        document.addEventListener('DOMContentLoaded', checkIncognito);
    </script>
</body>
</html> 